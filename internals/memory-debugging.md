# Memory Debugging

The file `lib/memdebug.c` contains debug-versions of a few functions.
Functions such as `malloc()`, `free()`, `fopen()`, `fclose()`, etc that
somehow deal with resources that might give us problems if we "leak" them.
The functions in the memdebug system do nothing fancy, they do their normal
function and then log information about what they just did. The logged data
can then be analyzed after a complete session,

`memanalyze.pl` is the perl script present in `tests/` that analyzes a log
file generated by the memory tracking system. It detects if resources are
allocated but never freed and other kinds of errors related to resource
management.

Internally, the definition of the preprocessor symbol `DEBUGBUILD` restricts
code which is only compiled for debug enabled builds. And symbol `CURLDEBUG`
is used to differentiate code which is _only_ used for memory
tracking/debugging.

Use `-DCURLDEBUG` when compiling to enable memory debugging, this is also
switched on by running configure with `--enable-curldebug`. Use
`-DDEBUGBUILD` when compiling to enable a debug build or run configure with
`--enable-debug`.

`curl --version` will list 'Debug' feature for debug enabled builds, and will
list 'TrackMemory' feature for curl debug memory tracking capable
builds. These features are independent and can be controlled when running the
configure script. When `--enable-debug` is given both features will be
enabled, unless some restriction prevents memory tracking from being used.
